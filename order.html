<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zamówienie produktów</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        .product {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #ddd;
        }
        .product strong {
            width: 40%;
        }
        .product span {
            width: 20%;
            text-align: center;
        }
        .quantity {
            width: 20%;
            text-align: center;
        }
        button {
            padding: 10px;
            margin-top: 20px;
            background-color: #0066cc;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #005bb5;
        }
    </style>
</head>
<body>

<h1>Zamówienie produktów</h1>

<div id="product-list"></div>

<label>
    Twój e-mail:
    <input type="email" id="email" placeholder="Wprowadź swój e-mail" required>
</label>
<br>
<label>
    Nazwa sklepu:
    <input type="text" id="store-name" placeholder="Wprowadź nazwę sklepu" required>
</label>
<br>
<button onclick="submitOrder()">Wyślij zamówienie</button>

<script>
    let products = JSON.parse(localStorage.getItem('products')) || [];

    function displayProducts() {
        const productList = document.getElementById('product-list');
        productList.innerHTML = '';
        products.forEach((product, index) => {
            const productElement = document.createElement('div');
            productElement.classList.add('product');
            productElement.innerHTML = `
                <strong>${product.name}</strong>
                <span>${product.price} GBP</span>
                <span>(Pakowane po: ${product.packSize})</span>
                <input type="number" class="quantity" id="quantity-${index}" min="0" placeholder="Ilość" />
            `;
            productList.appendChild(productElement);
        });
        console.log("Produkty załadowane z LocalStorage:", products); // Weryfikacja wczytania
    }

    function submitOrder() {
        const email = document.getElementById('email').value;
        const storeName = document.getElementById('store-name').value;
        const orderItems = products.map((product, index) => {
            const quantity = document.getElementById(`quantity-${index}`).value;
            return quantity > 0 ? `${product.name} - ${quantity} opakowań` : '';
        }).filter(item => item).join('\n');

        if (orderItems) {
            alert(`Zamówienie:\nEmail: ${email}\nSklep: ${storeName}\n${orderItems}`);
        } else {
            alert("Wybierz przynajmniej jeden produkt do zamówienia.");
        }
    }

    // Wyświetl produkty po załadowaniu strony
    displayProducts();
</script>

</body>
</html>
