<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Katalog produktów</title>
<link rel="icon" href="data:;base64,iVBORw0KGgo=">
<link rel="stylesheet" href="kreator.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
#virtualEditModal {
  display: flex;
  justify-content: center;
  align-items: center;
}
#virtualEditModal .modal-content {
  width: 95vw;
  max-width: 700px;
  height: 95vh;
  max-height: 800px;
  padding: 30px;
  display: flex;
  flex-direction: column;
  align-items: center;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
}
#virtualEditModal .canvas-container {
  width: 350px;
  height: 400px;
  margin: 30px auto;
  border: 1px solid #ccc;
}
#editModal {
  width: 95vw;
  max-width: 600px;
  max-height: 90vh;
  padding: 30px;
  border-radius: 12px;
}
#editModal .modal-content {
  gap: 20px;
}
.edit-field {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 15px;
}
.edit-field label {
  font-size: 1rem;
  font-weight: 600;
}
.edit-field input[type="text"],
.edit-field select,
.edit-field input[type="color"] {
  padding: 10px;
  font-size: 1rem;
  border-radius: 8px;
}
.edit-field input[type="color"] {
  height: 40px;
}
.modal-content button {
  padding: 12px 20px;
  font-size: 1rem;
  border-radius: 8px;
  min-width: 120px;
}
.modal-content .close {
  font-size: 24px;
}
#pageNav {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 15px;
  margin-bottom: 20px;
}
#pageNav button {
  padding: 12px 20px;
  font-size: 1rem;
  border-radius: 8px;
  background-color: #3182ce;
  color: #ffffff;
  border: none;
  cursor: pointer;
  transition: all 0.3s ease;
}
#pageNav button:hover:not(:disabled) {
  background-color: #2b6cb0;
  transform: translateY(-2px);
}
#pageNav button:disabled {
  background-color: #a0aec0;
  cursor: not-allowed;
}
#pageInfo {
  font-size: 1rem;
  color: #2d3748;
  font-weight: 500;
}
</style>
</head>
<body>
<!-- Sidebar -->
<div class="sidebar">
<h3>Opcje PDF</h3>
<label><input type="checkbox" id="showEan" checked> Kod EAN</label>
<label><input type="checkbox" id="showRanking" checked> Ranking</label>
<label><input type="checkbox" id="showCena" checked> Cena</label>
<label><input type="checkbox" id="showLogo" checked> Logo</label>
<label>
Waluta:
<select id="currencySelect">
<option value="EUR" selected>€ (EUR)</option>
<option value="GBP">£ (GBP)</option>
</select>
</label>
<label>
Język:
<select id="languageSelect">
<option value="pl" selected>Polski</option>
<option value="en">Angielski</option>
</select>
</label>
<h3>Układ modułów</h3>
<select id="layoutSelect">
<option value="1">1 moduł</option>
<option value="2">2 moduły</option>
<option value="4">4 moduły</option>
<option value="8">8 moduły</option>
<option value="16" selected>16 modułów</option>
<option value="4-2-4">4-2-4 moduły</option>
</select>
<h3>Wygląd ramek</h3>
<label><input type="radio" name="frameStyle" value="3d" checked> Z ramką 3D</label>
<label><input type="radio" name="frameStyle" value="none"> Bez ramek</label>
</div>
<!-- Main Content -->
<div class="main-content">
<!-- Panel -->
<div class="panel improved-panel">
<h2><i class="fas fa-cogs"></i> Import i ustawienia</h2>
<!-- Import pliku Excel -->
<div class="import-row">
<div class="file-section">
<label for="excelFile" class="file-label-wrapper">
<span id="fileLabel">Nie wybrano pliku</span>
</label>
<input type="file" id="excelFile" accept=".xls,.xlsx,.csv" style="display:none;">
</div>
<button class="btn-primary" onclick="window.importExcel()"><i class="fas fa-file-import"></i> Importuj Excel</button>
</div>
<!-- Wybór banera -->
<div class="upload-block">
<div class="banner-wrapper">
<button id="chooseBannerBtn" onclick="window.showBannerModal()" class="btn-banner">
<i class="fas fa-image"></i> Wybierz baner
</button>
<div id="bannerUpload" class="upload-zone">
<p>Przeciągnij baner tutaj lub <span class="file-label">kliknij, aby wybrać</span></p>
<input type="file" id="bannerFileInput" accept="image/*" style="display:none;">
</div>
</div>
</div>
<!-- Import tła -->
<div class="upload-block">
<div id="backgroundUpload" class="upload-zone">
<p>Przeciągnij tło tutaj lub <span class="file-label">kliknij, aby wybrać</span></p>
<input type="file" id="backgroundFileInput" accept="image/*" style="display:none;">
</div>
</div>
<!-- Import okładki -->
<div class="upload-block">
<div id="coverUpload" class="upload-zone">
<p>Przeciągnij okładkę tutaj lub <span class="file-label">kliknij, aby wybrać</span></p>
<input type="file" id="coverFileInput" accept="image/*" style="display:none;">
</div>
</div>
<!-- Import zdjęć -->
<div class="upload-block">
<div id="uploadArea" class="upload-zone">
<p>Przeciągnij zdjęcia tutaj lub <span class="file-label">kliknij, aby wybrać</span></p>
<input type="file" id="imageInput" accept="image/*" multiple style="display:none;">
</div>
</div>
<!-- Generowanie PDF -->
<div class="pdf-buttons">
<button id="pdfButton" class="btn-primary" disabled onclick="window.generatePDF()">
<i class="fas fa-file-pdf"></i> Generuj PDF
</button>
<button id="previewButton" class="btn-secondary" disabled onclick="window.previewPDF()">
<i class="fas fa-eye"></i> Podgląd PDF
</button>
</div>
</div>
<!-- Podgląd PDF -->
<div id="pdfPreview" style="margin-top:15px; display:none;">
<h3><i class="fas fa-file-pdf"></i> Podgląd PDF</h3>
<iframe id="pdfIframe" width="100%" height="600px" style="border:1px solid #ccc;"></iframe>
</div>
<!-- Nawigacja stron -->
<div id="pageNav">
<button id="prevPage" disabled onclick="window.showPage(window.currentPage - 1)">Poprzednia strona</button>
<span id="pageInfo">Strona 0/0</span>
<button id="nextPage" disabled onclick="window.showPage(window.currentPage + 1)">Następna strona</button>
</div>
<!-- Katalog produktów -->
<h1>Katalog produktów</h1>
<div id="debug"></div>
<div id="catalog"></div>
<!-- Modal wyboru banera -->
<div id="bannerModal" class="modal">
<div class="modal-content">
<span class="close" onclick="window.hideBannerModal()">&times;</span>
<h3>Wybierz baner</h3>
<div class="banner-options" id="bannerOptions"></div>
</div>
</div>
<!-- Modal edycji produktu -->
<div id="editModal" class="modal">
<div class="modal-content">
<span class="close" onclick="window.hideEditModal()">&times;</span>
<h3>Edytuj produkt</h3>
<div id="editForm"></div>
</div>
</div>
<!-- Modal paska postępu -->
<div id="progressModal" class="modal" style="display:none;">
<div class="modal-content" style="text-align:center;">
<span class="close" onclick="window.hideProgressModal()" style="display:none;">&times;</span>
<h3>Generowanie podglądu...</h3>
<div id="progressBarContainer" style="width:80%; margin:20px auto;">
<div id="progressBar" style="height:20px; background:#3182ce; width:0%; transition:width 0.1s;"></div>
</div>
<span id="progressText">0%</span>
</div>
</div>
<!-- Modal edycji wirtualnej -->
<div id="virtualEditModal" class="modal" style="display:none;">
</div>
<!-- Skrypty -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>
<script src="config.js"></script>
<script src="kreator1-2.js"></script>
<script src="kreator2-2.js"></script>
<script src="kreator3.js"></script>
<script src="kreator3-1.js"></script>
<script>
  // Inicjalizacja zmiennych globalnych
  window.manufacturerLogos = {};
  window.uploadedImages = {};
  window.products = [];
  window.jsonProducts = [];
  window.productEdits = {};
  window.pageEdits = {};
  window.globalCurrency = 'EUR';
  window.globalLanguage = 'pl';
</script>
</body>
</html>
