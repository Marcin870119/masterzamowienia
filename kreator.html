<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Katalog produktów</title>
<link rel="icon" href="data:;base64,iVBORw0KGgo=">
<link rel="stylesheet" href="kreator.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
#virtualEditModal {
  position: fixed !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  width: 100% !important;
  height: 100% !important;
  background: rgba(0,0,0,0.5) !important;
  display: none !important;
  justify-content: center !important;
  align-items: center !important;
  z-index: 1000 !important;
  box-sizing: border-box !important;
}
#virtualEditModal .modal-content {
  width: 80vw !important;
  max-width: 800px !important;
  height: 80vh !important;
  max-height: 1000px !important;
  min-height: 400px !important;
  padding: 20px !important;
  margin: auto !important;
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  background: #fff !important;
  border-radius: 8px !important;
  overflow: auto !important;
  box-sizing: border-box !important;
}
#virtualEditModal .canvas-container {
  width: 560px !important;
  height: 700px !important;
  margin: 20px auto !important;
  border: 1px solid #ccc !important;
  box-sizing: border-box !important;
}
</style>
</head>
<body>
<!-- Sidebar -->
<div class="sidebar">
<h3>Opcje PDF</h3>
<label><input type="checkbox" id="showEan" checked> Kod EAN</label>
<label><input type="checkbox" id="showRanking" checked> Ranking</label>
<label><input type="checkbox" id="showCena" checked> Cena</label>
<label><input type="checkbox" id="showLogo" checked> Logo</label>
<label>
Waluta:
<select id="currencySelect">
<option value="EUR" selected>€ (EUR)</option>
<option value="GBP">£ (GBP)</option>
</select>
</label>
<label>
Język:
<select id="languageSelect">
<option value="pl" selected>Polski</option>
<option value="en">Angielski</option>
</select>
</label>
<h3>Układ modułów</h3>
<select id="layoutSelect">
<option value="1">1 moduł</option>
<option value="2">2 moduły</option>
<option value="4">4 moduły</option>
<option value="8">8 modułów</option>
<option value="16" selected>16 modułów</option>
<option value="4-2-4">4-2-4 moduły</option>
</select>
<h3>Wygląd ramek</h3>
<label><input type="radio" name="frameStyle" value="3d" checked> Z ramką 3D</label>
<label><input type="radio" name="frameStyle" value="none"> Bez ramek</label>
</div>
<!-- Main Content -->
<div class="main-content">
<!-- Panel -->
<div class="panel improved-panel">
<h2><i class="fas fa-cogs"></i> Import i ustawienia</h2>
<!-- Import pliku Excel -->
<div class="import-row">
<div class="file-section">
<label for="excelFile" class="file-label-wrapper">
<span id="fileLabel">Nie wybrano pliku</span>
</label>
<input type="file" id="excelFile" accept=".xls,.xlsx,.csv" style="display:none;">
</div>
<button class="btn-primary" onclick="window.importExcel()"><i class="fas fa-file-import"></i> Importuj Excel</button>
</div>
<!-- Wybór banera -->
<div class="upload-block">
<div class="banner-wrapper">
<button id="chooseBannerBtn" onclick="window.showBannerModal()" class="btn-banner">
<i class="fas fa-image"></i> Wybierz baner
</button>
<div id="bannerUpload" class="upload-zone">
<p>Przeciągnij baner tutaj lub <span class="file-label">kliknij, aby wybrać</span></p>
<input type="file" id="bannerFileInput" accept="image/*" style="display:none;">
</div>
</div>
</div>
<!-- Import tła -->
<div class="upload-block">
<div id="backgroundUpload" class="upload-zone">
<p>Przeciągnij tło tutaj lub <span class="file-label">kliknij, aby wybrać</span></p>
<input type="file" id="backgroundFileInput" accept="image/*" style="display:none;">
</div>
</div>
<!-- Import okładki -->
<div class="upload-block">
<div id="coverUpload" class="upload-zone">
<p>Przeciągnij okładkę tutaj lub <span class="file-label">kliknij, aby wybrać</span></p>
<input type="file" id="coverFileInput" accept="image/*" style="display:none;">
</div>
</div>
<!-- Import zdjęć -->
<div class="upload-block">
<div id="uploadArea" class="upload-zone">
<p>Przeciągnij zdjęcia tutaj lub <span class="file-label">kliknij, aby wybrać</span></p>
<input type="file" id="imageInput" accept="image/*" multiple style="display:none;">
</div>
</div>
<!-- Generowanie PDF -->
<div class="pdf-buttons">
<button id="pdfButton" class="btn-primary" disabled onclick="window.generatePDF()">
<i class="fas fa-file-pdf"></i> Generuj PDF
</button>
<button id="previewButton" class="btn-secondary" disabled onclick="window.previewPDF()">
<i class="fas fa-eye"></i> Podgląd PDF
</button>
</div>
</div>
<!-- Podgląd PDF -->
<div id="pdfPreview" style="margin-top:15px; display:none;">
<h3><i class="fas fa-file-pdf"></i> Podgląd PDF</h3>
<iframe id="pdfIframe" width="100%" height="600px" style="border:1px solid #ccc;"></iframe>
</div>
<!-- Katalog produktów -->
<h1>Katalog produktów</h1>
<div id="debug"></div>
<div id="catalog"></div>
<!-- Modal wyboru banera -->
<div id="bannerModal" class="modal">
<div class="modal-content">
<span class="close" onclick="window.hideBannerModal()">&times;</span>
<h3>Wybierz baner</h3>
<div class="banner-options" id="bannerOptions"></div>
</div>
</div>
<!-- Modal edycji produktu -->
<div id="editModal" class="modal">
<div class="modal-content">
<span class="close" onclick="window.hideEditModal()">&times;</span>
<h3>Edytuj produkt</h3>
<div id="editForm"></div>
</div>
</div>
<!-- Modal paska postępu -->
<div id="progressModal" class="modal" style="display:none;">
<div class="modal-content" style="text-align:center;">
<span class="close" onclick="window.hideProgressModal()" style="display:none;">&times;</span>
<h3>Generowanie podglądu...</h3>
<div id="progressBarContainer" style="width:80%; margin:20px auto;">
<div id="progressBar" style="height:20px; background:#3182ce; width:0%; transition:width 0.1s;"></div>
</div>
<span id="progressText">0%</span>
</div>
</div>
<!-- Modal edycji wirtualnej -->
<div id="virtualEditModal" class="modal" style="display:none;">
</div>
<!-- Skrypty -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>
<script src="config.js"></script>
<script src="kreator3.js"></script>
<script src="kreator2-2.js"></script>
<script src="kreator1-2.js"></script>
<script>
console.log('Ładowanie skryptów rozpoczęte');
console.log('jspdf:', typeof window.jspdf !== 'undefined' ? 'Załadowany' : 'Niezaładowany');
console.log('XLSX:', typeof window.XLSX !== 'undefined' ? 'Załadowany' : 'Niezaładowany');
console.log('Papa:', typeof window.Papa !== 'undefined' ? 'Załadowany' : 'Niezaładowany');
console.log('JsBarcode:', typeof window.JsBarcode !== 'undefined' ? 'Załadowany' : 'Niezaładowany');
console.log('fabric:', typeof window.fabric !== 'undefined' ? 'Załadowany' : 'Niezaładowany');
console.log('showVirtualEditModal:', typeof window.showVirtualEditModal !== 'undefined' ? 'Zdefiniowany' : 'Niezdefiniowany');
</script>
</body>
</html>
