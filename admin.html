<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Zarządzania Produktami</title>
    <link rel="stylesheet" href="style.css">
    <script src="scripts/updateProducts.js" defer></script>
</head>
<body>
    <h1>Panel Zarządzania Produktami</h1>
    <table id="productTable">
        <thead>
            <tr>
                <th>Indeks</th>
                <th>Nazwa</th>
                <th>Cena (GBP)</th>
                <th>Ilość w opakowaniu</th>
                <th>Akcje</th>
            </tr>
        </thead>
        <tbody>
            <!-- Produkty będą dodawane tutaj -->
        </tbody>
    </table>
    
    <h2>Dodaj Produkt</h2>
    <input type="text" id="indexInput" placeholder="Indeks">
    <input type="text" id="nameInput" placeholder="Nazwa">
    <input type="number" id="priceInput" placeholder="Cena (GBP)">
    <input type="number" id="packSizeInput" placeholder="Ilość w opakowaniu">
    <button id="addProductButton">Dodaj produkt</button>
    <button id="saveProductsButton">Zapisz produkty (JSON)</button>

    <script>
        // Przyciski i formularze
        const addProductButton = document.getElementById('addProductButton');
        const saveProductsButton = document.getElementById('saveProductsButton');
        const productTable = document.getElementById('productTable').getElementsByTagName('tbody')[0];

        // Funkcja do dodawania produktu do tabeli
        addProductButton.addEventListener('click', () => {
            const index = document.getElementById('indexInput').value;
            const name = document.getElementById('nameInput').value;
            const price = document.getElementById('priceInput').value;
            const packSize = document.getElementById('packSizeInput').value;

            const newRow = productTable.insertRow();
            newRow.insertCell(0).innerText = index;
            newRow.insertCell(1).innerText = name;
            newRow.insertCell(2).innerText = price;
            newRow.insertCell(3).innerText = packSize;
            newRow.insertCell(4).innerHTML = '<button class="removeButton">Usuń</button>';

            document.getElementById('indexInput').value = '';
            document.getElementById('nameInput').value = '';
            document.getElementById('priceInput').value = '';
            document.getElementById('packSizeInput').value = '';

            // Dodaj funkcję usuwania
            newRow.querySelector('.removeButton').addEventListener('click', () => {
                productTable.deleteRow(newRow.rowIndex - 1);
            });
        });

        // Funkcja do zapisywania produktów
        saveProductsButton.addEventListener('click', () => {
            const products = [];
            for (let i = 0; i < productTable.rows.length; i++) {
                const row = productTable.rows[i];
                const product = {
                    code: row.cells[0].innerText,
                    name: row.cells[1].innerText,
                    price: row.cells[2].innerText,
                    packSize: row.cells[3].innerText,
                };
                products.push(product);
            }
            const json = JSON.stringify(products);
            // Zapisz json do pliku (tutaj wymagana jest implementacja)
            console.log(json);
        });
    </script>
</body>
</html>
